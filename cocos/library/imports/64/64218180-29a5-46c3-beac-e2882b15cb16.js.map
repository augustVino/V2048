{"version":3,"sources":["../../../../assets/scripts/assets/scripts/login.js"],"names":["cc","Class","extends","Component","properties","BGSprite","default","type","Sprite","serialzable","onLoad","url","loader","load","err","texture","frame","SpriteFrame","console","log","getComponent","spriteFrame","wx","login","success","res","code","button","createUserInfoButton","text","style","left","getSystemInfoSync","screenWidth","top","screenHeight","width","height","lineHeight","backgroundColor","color","textAlign","fontSize","borderRadius","show","onTap","errMsg","WeChat","onRegisterUser","userInfo","destroy","start"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAU;AACNC,qBAAS,IADH;AAENC,kBAAMP,GAAGQ,MAFH;AAGNC,yBAAa;AAHP;AADF,KAHP;;AAWL;;AAEAC,UAbK,oBAaI;AAAA;;AACL;AACA,YAAIC,MAAM,8HAAV;AACAX,WAAGY,MAAH,CAAUC,IAAV,CAAe;AACXF,oBADW;AAEXJ,kBAAM;AAFK,SAAf,EAGG,UAACO,GAAD,EAAMC,OAAN,EAAkB;AACjB,gBAAIC,QAAQ,IAAIhB,GAAGiB,WAAP,CAAmBF,OAAnB,CAAZ;AACA,gBAAID,GAAJ,EAAS;AACLI,wBAAQC,GAAR,CAAY,QAAZ,EAAsBL,GAAtB;AACH;AACD,kBAAKT,QAAL,CAAce,YAAd,CAA2BpB,GAAGQ,MAA9B,EAAsCa,WAAtC,GAAoDL,KAApD;AACH,SATD;;AAYAM,WAAGC,KAAH,CAAS;AACLC,qBAAS,sBAAO;AACZ,oBAAIC,IAAIC,IAAR,EAAc;AACVR,4BAAQC,GAAR,CAAY,cAAZ,EAA4BM,IAAIC,IAAhC;AACH;AACJ;AALI,SAAT;;AAQA;AACA,YAAIC,SAASL,GAAGM,oBAAH,CAAwB;AACjCrB,kBAAM,MAD2B;AAEjCsB,kBAAM,MAF2B;AAGjCC,mBAAO;AACHC,sBAAMT,GAAGU,iBAAH,GAAuBC,WAAvB,GAAqC,CAArC,GAAyC,EAD5C;AAEHC,qBAAKZ,GAAGU,iBAAH,GAAuBG,YAAvB,GAAsC,CAAtC,GAA0C,EAF5C;AAGHC,uBAAO,GAHJ;AAIHC,wBAAQ,EAJL;AAKHC,4BAAY,EALT;AAMHC,iCAAiB,SANd;AAOHC,uBAAO,SAPJ;AAQHC,2BAAW,QARR;AASHC,0BAAU,EATP;AAUHC,8BAAc;AAVX;AAH0B,SAAxB,CAAb;;AAiBAhB,eAAOiB,IAAP;AACA1B,gBAAQC,GAAR,CAAY,QAAZ,EAAsBQ,MAAtB;;AAEAA,eAAOkB,KAAP,CAAa,eAAO;AAChB3B,oBAAQC,GAAR,CAAYM,GAAZ;AACA,gBAAIA,IAAIqB,MAAJ,KAAe,gBAAnB,EAAqC;AACjC5B,wBAAQC,GAAR,CAAY,MAAZ;AACA;AACA4B,uBAAOC,cAAP,CAAsBvB,IAAIwB,QAA1B;;AAEAtB,uBAAOuB,OAAP;AACH,aAND,MAMO;AACHhC,wBAAQC,GAAR,CAAY,MAAZ;AACH;AACJ,SAXD;AAYH,KArEI;AAuELgC,SAvEK,mBAuEG,CAEP;AAzEI;;AA2EL;AA3EJ","file":"login.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        BGSprite: {\n            default: null,\n            type: cc.Sprite,\n            serialzable: true\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        // 通过获取云储存的图片来渲染背景\n        let url = 'https://7265-release-1zxx1-1301133378.tcb.qcloud.la/gamePicture/Login.png?sign=06b408dee5710fadee566d35385061b3&t=1579426938';\n        cc.loader.load({\n            url,\n            type: 'jpg'\n        }, (err, texture) => {\n            let frame = new cc.SpriteFrame(texture);\n            if (err) {\n                console.log('登录背景图片', err);\n            };\n            this.BGSprite.getComponent(cc.Sprite).spriteFrame = frame;\n        })\n\n\n        wx.login({\n            success: res => {\n                if (res.code) {\n                    console.log('登录成功，获取到code', res.code)\n                }\n            }\n        });\n\n        // 此处需要判断基础库版本，低版本不支持createUserInfoButton方法\n        var button = wx.createUserInfoButton({\n            type: 'text',\n            text: \"开始游戏\",\n            style: {\n                left: wx.getSystemInfoSync().screenWidth / 2 - 60,\n                top: wx.getSystemInfoSync().screenHeight / 2 - 60,\n                width: 120,\n                height: 40,\n                lineHeight: 40,\n                backgroundColor: '#fb94a9',\n                color: '#ffffff',\n                textAlign: 'center',\n                fontSize: 16,\n                borderRadius: 20\n            }\n        });\n\n        button.show();\n        console.log('button', button)\n\n        button.onTap(res => {\n            console.log(res);\n            if (res.errMsg === \"getUserInfo:ok\") {\n                console.log(\"已经授权\");\n                // 注册用户信息\n                WeChat.onRegisterUser(res.userInfo);\n\n                button.destroy();\n            } else {\n                console.log(\"没有授权\")\n            }\n        })\n    },\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});"]}